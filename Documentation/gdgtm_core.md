<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td> <br />
 <br />
<strong>gdgtm_core</strong></td>
<td style="text-align: right;"><a href=".">index</a><br />
<a href="file:/home/pete/Documents/GitHub/gdgtm/src/gdgtm/gdgtm_core.py">/home/pete/Documents/GitHub/gdgtm/src/gdgtm/gdgtm_core.py</a></td>
</tr>
</tbody>
</table>

`### Functions forming the core workflow of the gdgtm package.`

   
**Functions**

`      `

 

<span id="-align_raster">**align\_raster**</span>(source\_raster, target\_raster, dst\_raster, delete\_source=True)  
`This function aligns the source_raster to the target_raster   **Args:**     - source_raster (str): link to the geotiff location of the source raster.     - target_raster (str): link to the geotiff location of the target raster.     - dst_raster (str): path (including name) to the destination where the raster is saved.     - delete_source (bool): if True, delete source raster after completing the function.     **Returns:**     - str: confirmation that dst_raster exists   **Assumptions:** 1. All input files are geotiffs. 2. os and GDAL are installed and working (function tested using GDAL 3.4.1) 3. Function tested using Python 3.10.12   **Usage:** >>> align_raster(source_raster = "/home/pete/Documents/tests_and_vals/gdgtm/02_master_reprojected/olm_alc_switz_reproj_20040101.tif", >>>              target_raster = "/home/pete/Documents/tests_and_vals/gdgtm/04_master_rebound/olm_alc_switz_rebound_100_20040101.tif", >>>              dst_raster = "/home/pete/Documents/tests_and_vals/gdgtm/05_supplements_aligned/olm_alc_switz_aligned_20040101.tif", >>>              delete_source = False) "/home/pete/Documents/tests_and_vals/gdgtm/05_supplements_aligned/olm_alc_switz_aligned_20040101.tif exists"`

<!-- -->

<span id="-align_validate_raster">**align\_validate\_raster**</span>(source\_raster, target\_raster, dst\_raster, delete\_source=True)  
`This function aligns the source_raster to the target_raster   **Args:**     - source_raster (str): link to the geotiff location of the source raster.     - target_raster (str): link to the geotiff location of the target raster.     - dst_raster (str): path (including name) to the destination where the raster is saved.     - delete_source (bool): if True, delete source raster after completing the function.     **Returns:**     - str: confirmation that dst_raster exists and matches the target raster   **Assumptions:** 1. All input files are geotiffs. 2. os and GDAL are installed and working (function tested using GDAL 3.4.1) 3. Function tested using Python 3.10.12 4. Function relies on gdgtm.reproject_raster  5. Rasterio is working (function tested with rasterio 1.3.10)   **Usage:** >>> align_validate_raster(source_raster = "/home/pete/Documents/tests_and_vals/gdgtm/01_get_functions/olm_alc_switz_reproj_20040101.tif", >>>                       target_raster = "/home/pete/Documents/tests_and_vals/gdgtm/04_master_rebound/olm_alc_switz_rebound_100_20040101.tif", >>>                       dst_raster = "/home/pete/Documents/tests_and_vals/gdgtm/05_supplements_aligned/olm_alc_switz_aligned_20040101.tif", >>>                       delete_source = False)   {'dimension_match': True,  'projection_match': True,  'pixel_count_match': True,  'geotransform_match': True}`

<!-- -->

<span id="-change_raster_res">**change\_raster\_res**</span>(target\_res, src\_raster, dst\_raster, delete\_source=True)  
`The objective of this function is to load a raster from a geotiff, resample it to a set resolution, save it to a new file, and optionally delete the source raster.   Args:     target_res (float): Target resolution in units relevant to the crs          src_raster (str): Path to the original raster documents     dst_raster (str): Path to the file that will hold the re-resolved raster     delete_source (bool): toggles whether the source raster is to be deleted at the end of the operation      Returns:     str: string confirming that the new raster has the desired number of pixels (height and width)      Assumptions: 1. The source_raster is a geotiff. 2. os, re and GDAL are installed and working (function tested using GDAL 3.4.1) 3. Function tested using Python 3.10.12 4. WARNING: Assumes that the new target resolution is provided within the CRS units   Usage example: >>> gdgtm.change_raster_res(target_res = 500, >>>                         source_raster = "/home/pete/Downloads/chesla_transformed.tif", >>>                         dst_raster = "/home/pete/Downloads/chesla_transformed_500.tif") "Resolution meets target, file exists: /home/pete/Downloads/chelsa_transformed_500.tif"`

<!-- -->

<span id="-get_chelsa_bio_19812010_data">**get\_chelsa\_bio\_19812010\_data**</span>(parameter, bbox, dst\_raster)  
`This function retrieves 1980 - 2010 BIOCLIM+ data from the Chelsa S3 bucket (https://envicloud.wsl.ch/#/?prefix=chelsa%2Fchelsa_V2%2F). The function can be modified to point at a broader range of sources by changing the base_url and adjusting URL construction(indicated below)   **Agrs:**     - parameter (str): specifies which parameter is being sought. Needs to be exactly one of the paramter names specified in: https://chelsa-climate.org/bioclim/     - bbox (tuple): specifies the bounding box of the saved raster. Include edges in the following order: WNES in degrees relative to WGS84     - dst_raster (str): path and filename to the raster destination      **Returns:**     - str: confirmation that file exists      **Assumptions:** 1. Function tested using GDAL 3.4.1 2. Function tested using Python 3.10.12 3. The downloaded file is a GeoTIFF   **Usage:** >>> extent = (5.7663, 47.9163, 10.5532, 45.6755) >>> get_chelsa_bio_19812010_data("swe", bbox = extent, dst_raster = "/home/pete/Downloads/chesla_bio_test.tif") File exists: /home/pete/Downloads/chesla_bio_test.tif`

<!-- -->

<span id="-get_chelsa_clim_19812010_data">**get\_chelsa\_clim\_19812010\_data**</span>(parameter, month, bbox, dst\_raster)  
`This function retrieves 1980 - 2010 CLIM data from the Chelsa S3 bucket (https://envicloud.wsl.ch/#/?prefix=chelsa%2Fchelsa_V2%2F). The function can be modified to point at a broader range of sources by changing the base_url and adjusting URL construction(indicated below)   **Agrs:**     - parameter (str): specifies which parameter is being sought. Needs to be exactly one of the paramter names specified in: https://chelsa-climate.org/bioclim/     - month (str): string specifying which month of the year is sought. Has to be in the "mm" numeric format (e.g. 01)     - bbox (tuple): specifies the bounding box of the saved raster. Include edges in the following order: WNES in degrees relative to WGS84     - dst_raster (str): path and filename to the raster destination      **Returns:**     - str: confirmation that file exists      **Assumptions:** 1. Function tested using GDAL 3.4.1 2. Function tested using Python 3.10.12 3. The downloaded file is a GeoTIFF   **Usage:** >>> extent = (5.7663, 47.9163, 10.5532, 45.6755) >>> get_chelsa_clim_19812010_data("tas", "06", bbox = extent, dst_raster = "/home/pete/Downloads/chesla_clim_test.tif") File exists: /home/pete/Downloads/chesla_clim_test.tif`

<!-- -->

<span id="-get_chelsa_daily">**get\_chelsa\_daily**</span>(parameter, bbox, interval, dst\_path, dst\_name)  
`This function gets a cropped raster from Chelsa (https://chelsa-climate.org/), saves it as a .tiff to designated folder, checks that the .tiff exists, and prints a confirmation to the console.   Args:     parameter (str): The name of the variable used by Chelsa to find the intended data (has to be CMIP5 standard short name - specifies what climate varia is desired, see https://chelsa-climate.org/wp-admin/download-page/CHELSA_tech_specification_V2.pdf for possible varias).     bbox (tuple): a tuple of four floats defining the area covered (WNES)     interval (tuple): a yyyy-mm-dd formatted string determining the start date (position 0) and end date (position 1)     target_directory (str): location to which the downloaded .tiff is written     dst_name (str): First part of the file name   Returns:     str: string confirming that the intended .tiff indeed exists in the target location   Assumptions: 1. The provided interval is covered by Chelsa data. 2. The parameter name is correct. 3. os and GDAL are working (function tested using GDAL 3.4.1) 4. datetime and dateutil are working (function tested using versions 5.5 and 2.8.2) 4. Function tested using Python 3.10.12   Usage example: >>> get_chelsa_data(parameter = "tas",  >>>                 bbox = (7.3, 47.2, 7.5, 47.0),  >>>                 interval = ("2023-01-01", "2023-01-05"),  >>>                 dst_path = '/home/pete/Documents/tests_and_vals/gdgtm/01_get_functions/', >>>                 dst_name = "chelsa_tas_" >>>                ) File exists: /home/pete/Documents/tests_and_vals/gdgtm/01_get_functions/chelsa_tas_01_01_2023.tif File exists: /home/pete/Documents/tests_and_vals/gdgtm/01_get_functions/chelsa_tas_02_01_2023.tif File exists: /home/pete/Documents/tests_and_vals/gdgtm/01_get_functions/chelsa_tas_03_01_2023.tif File exists: /home/pete/Documents/tests_and_vals/gdgtm/01_get_functions/chelsa_tas_04_01_2023.tif File exists: /home/pete/Documents/tests_and_vals/gdgtm/01_get_functions/chelsa_tas_05_01_2023.tif`

<!-- -->

<span id="-get_cognames_from_stac_coll_static">**get\_cognames\_from\_stac\_coll\_static**</span>(static\_coll\_link)  
`This function produces a list of names of cog (cloud optimized geotiffs) files from a STAC collection.   Args:     static_coll_link (str): link to a static STAC collection      Returns:     list: list of cog names as strings      Assumptions: 1. Link points at an actual STAC static collection. 2. pystac is installed ( function tested using pystac 1.10.1). 3. Python installation includes the re module. 4. Function tested using Python 3.10.12 5. Function version for gdgtm version 0.1.0 is only tested against Open Land Map urls   Usage example: >>> test = gdgtm.get_cognames_fom_stac_coll_static("https://s3.eu-central-1.wasabisys.com/stac/openlandmap/wilderness_li2022.human.footprint/collection.json") >>> print(test[0]) https://s3.openlandmap.org/arco/wilderness_li2022.human.footprint_p_1km_s_20000101_20001231_go_epsg.4326_v16022022.tif`

<!-- -->

<span id="-get_cogs_from_olm">**get\_cogs\_from\_olm**</span>(cognames, target\_directory, target\_names, bbox=(-180, 180, 180, -180), interval=None)  
`The function uses a list of OpenLandMap cog locations to download a set of rasters bound in space and time   Args:     cognames (list): list of names of geotiffs in the OLM S3 bucket associated with the STAC collection of interest     target_directory (str): directory to which the files will be saved     target_names (str): the convention name for the files to be downlaoded     bbox (tupple): a tupple of floats indicating the WGS84 (EPSG:4326) coordinates of the bounding box used to crop the rasters downloaded. Defaults to entire grid (-180, 180, 180, -180)     interval (tupple or None): dates outside which rasters will be ignored. Needs to be provided in the yyyymmdd format. Defaults to 01JAN0001.          returns:     str: names of downloaded files in the target_directory     Downloaded geotiff files named in the target_names_orig_file_date format in the target_directory      Assumptions:     cognames point to an OLM S3 bucket and OLM data     All incmong raster refer to data points happenning between 01JAN0001 and 31DEC9999.     GDAL is available (function tested using GDAL 3.4.1)   Usage: >>> bbox = (5.7663, 47.9163, 10.5532, 45.6755) >>> >>> get_cogs_from_olm(cognames = test,  >>>                   target_directory = "/home/pete/Downloads/",  >>>                   target_names = "olm_humfoot_switz_raw_", >>>                   bbox = bbox, >>>                   interval = ("20000601", "20050101")     /home/pete/Downloads/olm_humfoot_switz_raw_20010101.tif /home/pete/Downloads/olm_humfoot_switz_raw_20020101.tif /home/pete/Downloads/olm_humfoot_switz_raw_20030101.tif /home/pete/Downloads/olm_humfoot_switz_raw_20040101.tif`

<!-- -->

<span id="-reproject_raster">**reproject\_raster**</span>(new\_crs, src\_raster, dst\_raster, delete\_source=True)  
`This function takes a geotiff raster (with metadata include coordinate projection) and turns out a geotiff raster with updated projection and a check that the new file exists. The function also has the option to do source deletion (e.g. for DM purposes)   Args:     new_crs (str): New coordinate system to which the raster is to be projected to.     source_raster (str): path to the geotiff with relevant metadata that will be reprojected     dst_raster (str): path and filename into which new (re-projected) raster will be saved     delete_source (bool): determines whether source raster is deleted following function execution   Resturns:     str: string confirming that the new geotiff has the expected projection system   Assumptions 1. Input data is a geotiff with a header readable by GDAL 2. GDAL is working (function tested with GDAL 3.4.1) 3. Function tested on Python 3.10.12   Usage example: >>> gdgtm.reproject_raster(new_crs = "ESRI:54028",  >>>                        source_raster = '/home/pete/Documents/tests_and_vals/gdgtm/01_get_functions/chelsa_tas_01_01_2023.tif', >>>                        dst_raster = '/home/pete/Downloads/chelsa_transformed.tif') "File exists: /home/pete/Downloads/chelsa_transformed.tif"`

<!-- -->

<span id="-set_raster_boundbox">**set\_raster\_boundbox**</span>(target\_bbox, src\_raster, dst\_raster, delete\_source=True)  
`This function loads a geotiff raster, fits it to a new bounding box, saves it as a geotiff file. Optionally it deletes the source raster.   Args:     target_bbox (tuple): Four numbers defining the target for the new BB (Order: WNES).      src_raster (str): Path to the original raster documents     dst_raster (str): Path to the file that will hold the re-resolved raster     delete_source (bool): toggles whether the source raster is to be deleted at the end of the operation      Returns:     str: string confirming that the new BB corners match the target spec.      Assumptions: 1. The source_raster is a geotiff. 2. os and rasterio are installed and working (function tested using rasterio 1.3.10) 3. numpy is working (function tested using numpy 1.24.3) 4. Function tested using Python 3.10.12   Usage example: >>> new_bb = (556400, 5254900, 566200, 5238900) >>> gdgtm.set_raster_boundbox(target_bbox = new_bb, >>>                           source_raster = "/home/pete/Downloads/chelsa_rescaled_2000.tif", >>>                           dst_raster = "/home/pete/Downloads/chelsa_new_bb.tif") "Warning, setting errors > 0.01 and file exists: /home/pete/Downloads/chelsa_transformed_500_cropped.tif"`

<!-- -->

<span id="-validate_raster_alignment">**validate\_raster\_alignment**</span>(raster\_1, raster\_2)  
`This function checks whether two rasters are aligned: i.e. whether they have the same number of pixels and whether these pixels have identical coordinates   **Args:**     - first_raster (str): link to the geotiff location of the first raster     - second_raster (str): link to the geotiff location of the second raster      **Returns:**     - bool: check whether the two rasters are aligned      **Assumptions:** 1. All input files are geotiffs. 2. os and GDAL are installed and working (function tested using GDAL 3.4.1) 3. Function tested using Python 3.10.12   **Usage:** >>> validate_raster_alignment("/home/pete/Documents/tests_and_vals/gdgtm/04_master_rebound/olm_alc_switz_rebound_100_20040101.tif", >>>                           "/home/pete/Documents/tests_and_vals/gdgtm/05_supplements_aligned/olm_alc_switz_aligned_20040101.tif")     {'dimension_match': False,  'projection_match': True,  'pixel_count_match': False,  'geotransform_match': False}`
